auth_debug = yes
auth_verbose = yes
mail_debug = yes
verbose_ssl = yes
auth_debug_passwords = yes
log_timestamp = "%Y-%m-%d %H:%M:%S "
login_log_format_elements = "user=<%u> method=%m rip=%r lip=%l mpid=%e %c %k"

syslog_facility =
log_path = /var/log/dovecot.log
info_log_path = /var/log/dovecot.log
debug_log_path = /var/log/dovecot.log

passdb {
  driver = dict
  args = /data/configs/dovecot-auth.conf
}
userdb {
  driver = dict
  args = /data/configs/dovecot-auth.conf
}

protocols = imap

service imap-login {
  # High security
  #service_count = 1
  #process_min_avail = 50
  #client_limit = 10000
  #process_limit = 10000

  # High performance
  vsz_limit = 512MB
  process_min_avail = 4
  #process_limit = 12
  #client_limit = 1500
  #service_count = 0
  #service_count = 50000

  inet_listener imap {
      port = 143
  }
  inet_listener imaps {
      port = 993
      ssl = yes
  }
}


#ssl_cipher_list = HIGH:!aNULL
ssl_cipher_list = DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:RC4-SHA:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!CBC:!PSK:!SRP:!DSS:!SSLv2:!EXPORT
ssl_dh_parameters_length = 2048
ssl_protocols = !SSLv2 !SSLv3
ssl_cert = </data/ssl/cert.pem
ssl_key = </data/ssl/key.pem
ssl_ca = </data/ssl/ca.pem
ssl_require_crl = no
ssl = yes

imap_capability = +XLIST

imap_client_workarounds = delay-newmail tb-extra-mailbox-sep
